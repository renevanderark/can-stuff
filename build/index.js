!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:11,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t>51?51:t;O.clear(),k.clear(),W=(0,m.default)(n,T),j=(0,v.default)(W),z=(0,b.default)(W,j.walls),C.followPuppet.apply(C,o(W.getVirtPos(z.getPos()))),G&&(C.setTrainOfThoughtAndAppear(["Welcome to my confused mind!","I have to find a way out of here!","Use the arrow keys to move me around...","left click to rotate my brain barriers...","and right click to move the rotation point...","of a brain barrier.","Press any key to suppress my thought bubble...","Be careful not to squash me!"]),G=!1),(0,x.initGameEvents)(j,z,W,R,I,A,C,function(){return i(function(){return a()})},function(){return i(function(){return a(n+2,e+1)})})}function i(t){z=null,j.walls=[],t()}var u=n(1),f=r(u),c=n(2),l=r(c),s=n(3),d=r(s),h=n(4),g=r(h),p=n(5),v=r(p),y=n(7),m=r(y),w=n(8),b=r(w),P=n(9),M=r(P),x=n(10),T=1e3,S=1e3,A=document.getElementById("foo-layer"),I=document.getElementById("bar-layer"),E=document.getElementById("baz-layer"),O=(0,f.default)(A.getContext("2d"),A),_=(0,f.default)(I.getContext("2d"),I),k=(0,f.default)(E.getContext("2d"),I),R=(0,g.default)(),W=void 0,j={walls:[]},z=null,C=(0,M.default)(T),G=!0;(0,d.default)(T,S,(0,l.default)([A,I,E],R.onResize,O.onResize,_.onResize,k.onResize,function(){return[z].filter(function(t){return null!==t}).concat(C).concat(j.walls).forEach(function(t){return t.forceUpdate()})})),setInterval(function(){return j.walls.forEach(function(t){return t.animateRotation(k.clear)})},2),a();var Y=function t(){O.render([z].filter(function(t){return null!==t}).concat(j.walls.filter(function(t){return!t.isAnimating()}))),_.render([C]),k.render(j.walls.filter(function(t){return t.isAnimating()})),requestAnimationFrame(t)};Y()},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=void 0,r=!1;return{onResize:function(t){n=t},clear:function(){r=!0},render:function(o){r?(t.clearRect(0,0,e.width,e.height),r=!1):o.filter(function(t){return t.updated()}).forEach(function(e){return e.clear(t,n)}),o.filter(function(t){return t.updated()}).forEach(function(e){return e.draw(t,n)})}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){function e(e,n,r){t.forEach(function(t){t.style.left=parseInt(Math.floor((window.innerWidth-n)/2),10),t.style.top=parseInt(Math.floor((window.innerHeight-r)/2),10),t.width=n,t.height=r})}for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return[e].concat(r)}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){function r(t,e,r){n.forEach(function(n){return n(r,t,e)})}function o(){var e=window,n=e.innerWidth,o=e.innerHeight;n*a>o?r(parseInt(Math.floor(o/a),10),o,o/a/t):r(n,parseInt(Math.floor(n*a),10),n/t)}var a=e/t;o(),window.addEventListener("resize",o)}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=void 0,e=[];return{onResize:function(e){t=e},add:function(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,a=function(e){return r(e,t)};e.push({elem:o,eventName:n,fn:a}),o.addEventListener(n,a)},clear:function(){e.forEach(function(t){var e=t.elem,n=t.eventName,r=t.fn;return e.removeEventListener(n,r)})}}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.initGrid,n=t.Types,r=t.getP,o=t.getY,i=t.SIZE,u=(0,a.default)(t),f=u.makeWall,c=e();c[r((i-1)/2,(i-1)/2)]=n.ClosedSpace;for(var l=[],s=0;s<i*i;s+=Math.floor(3*Math.random())+1){var d=s+o(s)%2;if(c[d]!==n.ClosedSpace){var h=f(d,c,0===Math.floor(2.5*Math.random())?3:2);null!==h&&l.push(h)}}return{walls:l,complexity:l.length}};var o=n(6),a=r(o)},function(t,e){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){var n=[],r=!0,o=!1,a=void 0;try{for(var i,u=t[Symbol.iterator]();!(r=(i=u.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){o=!0,a=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.default=function(t){var e=t.getOpen,o=t.Types,a=t.getScreenPos,i=t.getGridSize,u=t.getRect,f=t.getX,c=t.getY,l=t.getP,s=function(t){var e=t,o=Math.floor(Math.random()*t.length),s=e[o],d=!0,h=0,g=function(){return{x:f(s),y:c(s)}},p=function(t,e,n){return{x:t.x+Math.round(e.x*Math.cos(n)-e.y*Math.sin(n)),y:t.y+Math.round(e.x*Math.sin(n)+e.y*Math.cos(n))}},v=function(t,e,n,r){return t.map(function(t,o){return p(e,n[o],r)}).map(function(t){var e=t.x,n=t.y;return l(e,n)})},y=function(){for(var e=g(),n=t.map(function(t){return{x:f(t),y:c(t)}}),r=n.map(function(t){return{x:e.x-t.x,y:e.y-t.y}}),o=0;o<4;o++){var a=90*o*(Math.PI/180),i=v(n,e,r,a);if(i.filter(function(e,n){return e===t[n]}).length===t.length)return o}return 0},m=function(t,r,o){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;t.save();var f=a(s,r);t.translate.apply(t,n(f)),t.rotate(h*Math.PI/180),t.beginPath(),t.lineCap="round",t.strokeStyle=o,t.lineWidth=Math.floor(i(r)-2*u),e.forEach(function(e,o){0===o?t.moveTo.apply(t,n(a(e,r).map(function(t,e){return t-f[e]}).map(function(t){return t-u}))):t.lineTo.apply(t,n(a(e,r).map(function(t,e){return t-f[e]}).map(function(t){return t-u})))}),t.stroke(),t.restore()},w=function(t,e){t.save(),t.beginPath(),t.fillStyle="rgb(96, 0, 0)",t.translate.apply(t,n(a(s,e))),t.arc(-1,-1,i(e)/10,0,2*Math.PI,!1),t.fill(),t.beginPath(),t.strokeStyle="rgb(196, 96, 96)";var r=i(e);t.lineWidth=Math.round(r/14),t.moveTo(-1,-1),t.lineTo(-3*e,-.4*r*e),t.stroke(),t.restore()},b=y();return{movePivot:function(){o=o<e.length-1?o+1:0,s=e[o],t=e,b=y(),d=!0},getSpaces:function(){return e},isAt:function(t,n,o){for(var u=i(o)/2,f=0;f<e.length;f++){var c=a(e[f],o),l=r(c,2),s=l[0],d=l[1];if(d-u<n&&d+u>n&&s-u<t&&s+u>t)return!0}return!1},rotate:function(n){var r=g(),o=t.map(function(t){return{x:f(t),y:c(t)}}),a=o.map(function(t){return{x:r.x-t.x,y:r.y-t.y}}),i=b;do{b=3===b?0:b+1;var u=90*b*(Math.PI/180),l=v(o,r,a,u);if(l.indexOf(-1)<0&&0===l.filter(function(t){return!n(t)}).length){e=l;break}}while(b!==i);return h=i<b?Math.abs(i-b)*-90:i>b?Math.abs(i-4-b)*-90:0,d=!0,b},isAnimating:function(){return 0!==h},animateRotation:function(t){h<0&&(h++,0===h&&t(),d=!0)},draw:function(t,e){m(t,e,"rgba(96, 0, 0, 0.6)",0),m(t,e,"rgba(128, 0, 0, 0.8)",1),m(t,e,"rgb(196, 0, 0)",2),w(t,e),d=!1},clear:function(t,r){0!==h&&t.clearRect(0,0,t.canvas.width,t.canvas.height),e.forEach(function(e){t.clearRect.apply(t,n(u(e,r).map(function(t,e){return e<2?t-1:t+1})))})},forceUpdate:function(){d=!0},updated:function(){return d}}},d=function t(n,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];r[n]=o.ClosedSpace;var u=e(n,r);return 0===u.length||1===a?i.length<1?null:s(i.concat(n)):t(u[parseInt(Math.random()*u.length,10)],r,a-1,i.concat(n))};return{makeWall:d}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n={OpenSpace:0,PathSpace:1,ClosedSpace:2},r=e/t,o=function(e){return e%t},a=function(e){return(e-e%t)/t},i=function(e,n){return e>=0&&e<t&&n>=0&&n<t?e+n*t:-1},u=function(e,n){return[n>0?i(e,n-1):null,n<t-1?i(e,n+1):null,e>0?i(e-1,n):null,e<t-1?i(e+1,n):null]},f=function(t,e){return[o(t)*r*e+r*e*.5,a(t)*r*e+r*e*.5]},c=function(t,e){return[o(t)*r*e,a(t)*r*e,r*e,r*e]},l=function(t){return r*t},s=function(t){return[o(t)*r+r/2,a(t)*r+r/2]},d=function(t,e){return e[t]===n.OpenSpace},h=function(t,e){return u(o(t),a(t)).filter(function(t){return d(t,e)})},g=function(){for(var e=[],r=0;r<t;r++)for(var o=0;o<t;o++)e[i(o,r)]=n.OpenSpace;return e},p=function(t,e){return function(n){return t.filter(function(t,n){return n!==e}).map(function(t){return t.getSpaces()}).reduce(function(t,e){return t.concat(e)},[]).indexOf(n)<0}};return{SIZE:t,getRect:c,getScreenPos:f,getGridSize:l,getVirtPos:s,getX:o,getY:a,getP:i,getOpen:h,Types:n,initGrid:g,gridSpaceIsFree:p}}},function(t,e){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var r=t.getP,o=t.getScreenPos,a=t.getGridSize,i=t.SIZE,u=t.getRect,f=t.getX,c=t.getY,l=r((i-1)/2,(i-1)/2),s=l,d=!0;return{getPos:function(){return l},move:function(n,o){var a=r(f(l)+n,c(l)+o);s=l,a>-1&&t.gridSpaceIsFree(e,-1)(a)&&(l=a),d=!0},draw:function(t,e){t.beginPath(),t.fillStyle="rgb(128,128,255)",t.arc.apply(t,n(o(l,e)).concat([a(e)/3,0,2*Math.PI,!1])),t.fill(),t.fillStyle="black",t.font="normal "+.75*a(e)+"px sans-serif",t.save(),t.translate(-(a(e)/4),a(e)/10),t.fillText.apply(t,["âˆž"].concat(n(o(l,e)))),t.restore(),d=!1},clear:function(t,e){t.clearRect.apply(t,n(u(s,e)))},forceUpdate:function(){d=!0},updated:function(){return d}}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e={x:0,y:0},n=!0,r=!1,o="...",a=[],i=function(){a.forEach(function(t){return clearTimeout(t)}),r=!1,n=!0,o="..."};return{isVisible:function(){return r},followPuppet:function(t,r){e={x:t,y:r},n=!0},disappear:i,setTrainOfThoughtAndAppear:function(t){var e=2500;o=t.shift(),a.forEach(function(t){return clearTimeout(t)}),t.forEach(function(t,r){a.push(setTimeout(function(){o=t,n=!0},e*(r+1)))}),a.push(setTimeout(i,(t.length+1)*e)),r=!0,n=!0},draw:function(a,i){if(r){var u=e.y>250?150:450,f=t/2;a.fillStyle="rgba(255,255,255,1)",a.strokeStyle="black",a.lineWidth=1*i,a.save(),a.translate(f*i,u*i),a.scale(3,1),a.beginPath(),a.arc(0,0,150*i,2*Math.PI,!1),a.fill(),a.stroke(),a.restore();for(var c=Math.atan2(u-e.y,f/2-e.x),l=c-1.5,s=Math.sqrt(Math.pow(f/2-e.x,2)+Math.pow(u-e.y,2)),d=e.x-10,h=e.y,g=0;g<10;g++)l+=.2,d+=Math.cos(l)*(s*(g/70)),h+=Math.sin(l)*(s*(g/70)),a.beginPath(),a.arc(d*i,h*i,(g+1)*i,2*Math.PI,!1),a.fill();a.font="bold "+30*i+"px sans-serif",a.fillStyle="black",a.fillText(o,f*i-a.measureText(o).width/2,(15+u)*i),n=!1}},clear:function(t){t.clearRect(0,0,t.canvas.width,t.canvas.height)},forceUpdate:function(){n=!0},updated:function(){return n}}}},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e,n,o,i,u,f,c,l){var s=0,d=setInterval(function(){s++,s>=10&&!f.isVisible()&&(f.setTrainOfThoughtAndAppear((0,a.strayThought)()),s=0)},1e3);o.add("click",function(r,i){t.walls.map(function(t,e){return{w:t,wIdx:e}}).filter(function(t){var e=t.w;return e.isAt(r.clientX-r.target.offsetLeft,r.clientY-r.target.offsetTop,i)}).forEach(function(e){var r=e.w,o=e.wIdx;r.clear(u.getContext("2d"),i),r.rotate(n.gridSpaceIsFree(t.walls,o))}),n.gridSpaceIsFree(t.walls,-1)(e.getPos())||(f.setTrainOfThoughtAndAppear([(0,a.gameOverThought)()]),clearInterval(d),o.clear(),window.setTimeout(c,2500))},i),o.add("contextmenu",function(e,n){return t.walls.filter(function(t){return t.isAt(e.clientX-e.target.offsetLeft,e.clientY-e.target.offsetTop,n)}).forEach(function(t){return t.movePivot()}),e.preventDefault()}),o.add("keydown",function(t,i){switch(s=0,f.disappear(),t.keyCode){case 37:e.move(-1,0);break;case 38:e.move(0,-1);break;case 39:e.move(1,0);break;case 40:e.move(0,1)}f.followPuppet.apply(f,r(n.getVirtPos(e.getPos()))),0!==n.getX(e.getPos())&&0!==n.getY(e.getPos())&&n.getX(e.getPos())!==n.SIZE-1&&n.getY(e.getPos())!==n.SIZE-1||(clearInterval(d),o.clear(),f.setTrainOfThoughtAndAppear([(0,a.salvationThought)()]),window.setTimeout(l,1e3))})}Object.defineProperty(e,"__esModule",{value:!0}),e.initGameEvents=void 0;var a=n(11);e.initGameEvents=o},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=["Noooo!!","The agony!","Why?!","What did you do?","The pain!","The anguish!"],r=["Thank you!","Bless you!","Salvation!","Freedom!","Joy!","Hurray!"],o=[["Where did I put my keys?","I must have left them somewhere..."],["What are you waiting for?","I'm going crazy in here!"],["What were the four noble truths again?","Suffering...","...the origin of suffering...","...the cessation of suffering...","...the noble 8-fold path."],["Stuck in the wheel of becoming..."],["3.14","3.141","3.1415","3.14159","3.141592..."],["These games always involve Pi...","...but never 42...","...or do they?"]],a=function(t){return t[Math.floor(Math.random()*t.length)]},i=function(){return a(n)},u=function(){return a(r)},f=function(){return a(o).slice()};e.gameOverThought=i,e.salvationThought=u,e.strayThought=f}]);